\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{phyxmeow-common}[2021/09/25 TeX Preamble]

%% Options

\DeclareOption{plain}{
  \let\phyxmeow@plain\@empty
}
\DeclareOption{newtx}{
  \let\phyxmeow@plain\@empty
  \let\phyxmeow@NewTX\@empty
}
\DeclareOption{unicode}{
  \def\phyxmeow@fontsetup{default}
}
\DeclareOption{fourier}{
  \let\phyxmeow@Fourier\@empty
}
\DeclareOption{stix2}{
  \def\phyxmeow@fontsetup{stixtwo}
}
\DeclareOption{libertinus}{
  \def\phyxmeow@fontsetup{libertinus}
}
\DeclareOption{xcharter}{
  \def\phyxmeow@fontsetup{xcharter}
}
\DeclareOption{oldstd}{
  \def\phyxmeow@fontsetup{oldstandard}
}
\DeclareOption{concrete}{
  \def\phyxmeow@fontsetup{concrete}
}
\DeclareOption{xy}{
  \def\phyxmeow@xy\@empty
}
\DeclareOption{cjk}{
  \def\phyxmeow@cjk\@empty
}
\DeclareOption*{\PackageWarning{phyxmeow}{Unknown option '\CurrentOption'.}}
\ProcessOptions\relax

%% Load Packages

\RequirePackage[dvipsnames,svgnames,x11names]{xcolor}
\RequirePackage{geometry}
\RequirePackage{microtype}

\RequirePackage{amsmath}
\RequirePackage{amsthm}
\RequirePackage{mathtools}

\RequirePackage{mathrsfs}
\RequirePackage{stmaryrd}

\RequirePackage{extarrows}
\RequirePackage{enumerate}
\RequirePackage{tensor}
% \RequirePackage{commath}
\RequirePackage{physics}

\RequirePackage{graphicx}
\RequirePackage{subcaption}
\RequirePackage{tikz}
\RequirePackage{tikz-3dplot}
  \tikzset{every picture/.style={line width=0.75pt}}
\RequirePackage{quiver}
% \RequirePackage{tikz-cd}
\@ifundefined{phyxmeow@xy}{}{
  \RequirePackage[all,cmtip]{xy}
}
\RequirePackage{pgfplots}
  \pgfplotsset{compat=newest}
\usepackage{tcolorbox}
  \tcbuselibrary{most}

\RequirePackage[colorlinks=true,linkcolor=blue]{hyperref}
\RequirePackage{cleveref}
\RequirePackage[hyperref=true,backend=biber,style=alphabetic,backref=true,url=false]{biblatex}

\@ifundefined{phyxmeow@plain}{
  \RequirePackage[warnings-off={mathtools-colon,mathtools-overbracket}]{unicode-math}
  \newcommand{\Id}{\mathbb{1}}
  \newcommand{\lap}{\increment}
  \renewcommand{\emptyset}{âŒ€}
}{
  \RequirePackage{latexsym}
  \@ifundefined{phyxmeow@NewTX}{
    \RequirePackage{amssymb}
    \RequirePackage{eucal}
  }{
    \RequirePackage{newtx}
  }
  \RequirePackage{bm}
  \RequirePackage{bbm}
  \newcommand{\Id}{\mathbbm{1}}
  \newcommand{\lap}{\Delta}
  \renewcommand{\emptyset}{\varnothing}
}

\@ifundefined{phyxmeow@Fourier}{
}{
  \RequirePackage{fourier-otf}
}

\@ifundefined{phyxmeow@fontsetup}{}{
  \RequirePackage[\phyxmeow@fontsetup]{fontsetup}
}

\@ifundefined{phyxmeow@cjk}{}{
  \usepackage{xeCJK}
  \setCJKmainfont{FZShuSong-Z01}[BoldFont=FZXiaoBiaoSong-B05,ItalicFont=FZKai-Z03]
  \setCJKsansfont{FZXiHeiI-Z08}[BoldFont=FZHei-B01]
  \setCJKmonofont{FZFangSong-Z02}
  \setCJKfamilyfont{zhsong}{FZShuSong-Z01}[BoldFont=FZXiaoBiaoSong-B05]
  \setCJKfamilyfont{zhhei}{FZHei-B01}
  \setCJKfamilyfont{zhkai}{FZKai-Z03}
  \setCJKfamilyfont{zhfs}{FZFangSong-Z02}
  \setCJKfamilyfont{zhli}{FZLiShu-S01}
  \setCJKfamilyfont{zhyou}{FZXiYuan-M01}[BoldFont=FZZhunYuan-M02]
}

%% Define Commands

\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\ran}{ran}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Span}{span}
\DeclareMathOperator{\img}{Im}
\DeclareMathOperator{\Ric}{Ric}
\newcommand{\card}{\texttt{\#}}
\newcommand{\ie}{\emph{i.e.}}
\newcommand{\st}{\emph{s.t.}}
\newcommand{\eps}{\varepsilon}
\newcommand{\vphi}{\varphi}
\newcommand{\vthe}{\vartheta}
\newcommand{\II}{I\!I}
\newcommand{\acts}{\curvearrowright}
\newcommand{\xrr}{\xlongrightarrow}
\newcommand{\into}{\hookrightarrow}
\newcommand{\pdif}[2]{\frac{\partial #1}{\partial #2}}
\renewcommand{\op}{\operatorname}
